{
    "collab_server" : "",
    "contents" : "library(shiny)\nlibrary(stringr)\nlibrary(purrr)\n\n# load recipes\nload(\"recipes.Rdata\")\nr <- transpose(transpose(recipes)$ingredients)\n\nshinyServer(function(input, output) {\n\n  # chosen options from user\n  match_list <- reactive({\n    chosen_options <- list(\n      meat = input$choose_meat,\n      veggies = input$choose_veggie,\n      fruit = input$choose_fruit\n    )\n\n    # finds matching dish for chosen options and all 'any' dishes\n    # prints out in alphabetical order\n    matches <- map(names(chosen_options), function(type){\n      # finds all matches, returns if none requested\n      options <- chosen_options[[type]]\n      if(length(options) == 0) return(character(0))\n      map(options, function(x){\n        matches <- names(recipes)[str_detect(r[[str_to_title(type)]], x)]\n        any <- names(recipes)[str_detect(r[[str_to_title(type)]], \"any\")]\n        return( c(matches, any) )\n      })\n    }) %>% unlist %>% unique %>% sort\n\n  })\n\n  # output matches\n  lapply(1:length(recipes), function(i) {\n    output[[paste0(\"match\", i)]] <- renderUI({\n\n      name <- match_list()[i]\n      address <- name %>%\n        str_replace_all(\" \", \"-\") %>%\n        paste0(\"http://jnguyen92.github.io/nhuyhoa//2017/05/\", ., \".html\")\n      if(!is.na(name)) h4(a(href = address, name))\n\n    })\n  })\n\n})\n",
    "created" : 1495924044518.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2995492974",
    "id" : "D180C738",
    "lastKnownWriteTime" : 1495929934,
    "last_content_update" : 1495929934191,
    "path" : "~/Desktop/recipe_finder/server.R",
    "project_path" : "server.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}